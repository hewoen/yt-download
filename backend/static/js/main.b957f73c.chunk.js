(this["webpackJsonpyt-download"]=this["webpackJsonpyt-download"]||[]).push([[0],{68:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(49),s=n.n(i),c=(n(68),n(17)),o=n(18),u=n(19),l=n(21),d=n(20),j=n(26),h=n.n(j),b=n(1),p="https://yt-download.woenne.de/api.php";var O=n(111),f=n(113),v=n(107),x=n(109),m=n(112),w=n(108),g=n(110);function k(e){var t=new Date(1e3*e);return t.getDate()+"."+(t.getMonth()+1)+"."+t.getFullYear()+" - "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}var y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={render:!0},a.row=a.props.row,a}return Object(u.a)(n,[{key:"removeChild",value:function(){var e=this;window.confirm("Do you realy want remove this job?")&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){},n=new FormData;n.append("id",e),h.a.post(p+"?action=removeJob",n).then((function(e){return t(e.data)}))}(this.row.id,(function(){return e.setState({render:!1})}))}},{key:"render",value:function(){var e,t=this;return console.log("Job Row"),this.state.render?Object(b.jsxs)(w.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(b.jsx)(v.a,{children:k(this.row.ts_start)}),Object(b.jsx)(v.a,{children:this.row.type}),Object(b.jsx)(v.a,{children:Object(b.jsx)("a",{href:this.row.url,target:"_blank",children:this.row.title})}),Object(b.jsx)(v.a,{children:(e=this.row.status,{1:Object(b.jsx)("span",{className:"status-in-queue",children:"In queue"}),2:Object(b.jsx)("span",{className:"status-in-progress",children:"In progress"}),3:Object(b.jsx)("span",{className:"status-finished",children:"Finished"})}[e])}),Object(b.jsx)(v.a,{children:3==this.row.status?Object(b.jsx)("a",{href:this.row.download_url,children:"Download here"}):""}),Object(b.jsx)(v.a,{children:Object(b.jsx)("span",{onClick:function(e){return t.removeChild()},className:"btn-remove",children:"x"})})]}):null}}]),n}(r.a.Component),C=y;var E=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Queue"}),Object(b.jsx)(x.a,{component:g.a,children:Object(b.jsxs)(O.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(b.jsx)(m.a,{children:Object(b.jsxs)(w.a,{children:[Object(b.jsx)(v.a,{children:"Start"}),Object(b.jsx)(v.a,{children:"Type"}),Object(b.jsx)(v.a,{children:"Title"}),Object(b.jsx)(v.a,{children:"Current status"}),Object(b.jsx)(v.a,{}),Object(b.jsx)(v.a,{})]})}),Object(b.jsx)(f.a,{children:this.props.rows.map((function(e){return Object(b.jsx)(C,{row:e})}))})]})})]})}}]),n}(r.a.Component),B=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).captionDisabled="In Progress...",a.captionEnabled=a.props.captionEnabled,a}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(b.jsx)("button",{class:"btn",disabled:!this.props.enabled,id:"btn_confirm",onClick:function(){return e.props.onClick()},children:this.props.enabled?this.captionEnabled:this.captionDisabled})}}]),n}(r.a.Component),S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).url="",a.type="",a.state={rows:[],url:"",type:"",confirmationButtonEnabled:!0},a}return Object(u.a)(n,[{key:"update",value:function(){var e,t=this;this.unsetTicker(),e=function(e){var n=[];for(var a in e)n.push(e[a]);t.setState({rows:[]}),t.setState({rows:n}),t.setTicker()},h.a.get(p+"?action=getQueue").then((function(t){return e(t.data)}))}},{key:"setTicker",value:function(){var e=this;this.ticker=setInterval((function(){return e.update()}),1e4)}},{key:"unsetTicker",value:function(){clearInterval(this.ticker)}},{key:"componentDidMount",value:function(){this.setTicker(),this.update()}},{key:"componentDidUnmount",value:function(){this.unsetTicker()}},{key:"addJobButtonClicked",value:function(){var e=this;if(""!==this.type){for(var t in this.state.rows)if(this.state.rows[t].url===this.url)return void alert("This clip is aleady in your queue!");this.unsetTicker(),this.setState({confirmationButtonEnabled:!1}),function(e,t,n){var a=new FormData;a.append("url",e),a.append("type",t),h.a.post(p+"?action=addJob",a).then((function(e){return n(e.data)}))}(this.url,this.type,(function(t){null!=t.title?(alert("The download job was added sucessfully to your queue."),e.setState({rows:e.state.rows.concat([t]),confirmationButtonEnabled:!0})):(alert("Invalid URL: "+e.url),e.setState({confirmationButtonEnabled:!0})),e.setTicker()}))}else alert("Please select a format")}},{key:"render",value:function(){var e=this;return Object(b.jsxs)("div",{id:"jobForm",children:[Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("legend",{children:"URL"}),Object(b.jsx)("input",{type:"text",id:"url",size:"100",onChange:function(t){return e.url=t.target.value}})]}),Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("legend",{children:"Gew\xfcnschtes Format"}),"Audio",Object(b.jsx)("input",{type:"radio",name:"type",value:"audio",onChange:function(t){return e.type=t.target.value}}),"Video",Object(b.jsx)("input",{type:"radio",name:"type",value:"video",onChange:function(t){return e.type=t.target.value}})]}),Object(b.jsx)(B,{captionEnabled:"Add job to queue",enabled:this.state.confirmationButtonEnabled,onClick:this.addJobButtonClicked.bind(this)}),Object(b.jsx)("hr",{}),Object(b.jsx)(E,{rows:this.state.rows})]})}}]),n}(r.a.Component),T=n(40),D=n(4),F=(n(93),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).password="",a.state={confirmationButtonEnabled:!0,remember:!0,success:!1},a}return Object(u.a)(n,[{key:"loginButtonClicked",value:function(){var e=this;this.setState({confirmationButtonEnabled:!1}),function(e,t,n){var a=new FormData;a.append("password",e),a.append("remember",t?"true":"false"),h.a.post(p+"?action=login",a).then((function(e){return n(e.data)}))}(this.password,this.state.remember,(function(t){t.success?e.setState({success:!0}):(alert("Wrong password!"),e.setState({confirmationButtonEnabled:!0}))}))}},{key:"render",value:function(){var e=this;if(!this.state.success)return Object(b.jsx)("div",{id:"loginForm",children:Object(b.jsxs)("fieldset",{children:[Object(b.jsx)("legend",{children:"Password"}),Object(b.jsx)("input",{type:"password",size:"20",onChange:function(t){return e.password=t.target.value}}),Object(b.jsx)("br",{}),"Remember me",Object(b.jsx)("input",{type:"checkbox",checked:this.state.remember,onClick:function(t){return e.setState({remember:!e.state.remember})}}),Object(b.jsx)("br",{}),Object(b.jsx)(B,{captionEnabled:"Login",enabled:this.state.confirmationButtonEnabled,onClick:this.loginButtonClicked.bind(this)})]})});window.location.reload()}}]),n}(r.a.Component));function I(){return Object(b.jsx)("div",{id:"header",children:Object(b.jsx)("h1",{children:"YT-Downloader"})})}var J=function(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),n=t[0],r=t[1];return h.a.defaults.withCredentials=!0,Object(a.useEffect)((function(){var e;e=function(e){r(e.logged_in)},h.a.get(p+"?action=checkLogin").then((function(t){return e(t.data)}))}),[]),Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(I,{}),Object(b.jsx)("div",{id:"main",children:Object(b.jsx)(T.a,{children:Object(b.jsxs)(D.d,{children:[Object(b.jsx)(D.b,{path:"/",element:n?Object(b.jsx)(S,{}):Object(b.jsx)(D.a,{push:!0,to:"/login"})}),Object(b.jsx)(D.b,{path:"/login",element:n?Object(b.jsx)(D.a,{push:!0,to:"/"}):Object(b.jsx)(F,{})})]})})})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,114)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(J,{})}),document.getElementById("root")),L()}},[[94,1,2]]]);
//# sourceMappingURL=main.b957f73c.chunk.js.map